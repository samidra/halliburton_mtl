<div class="container-fluid">
    <div class="row" style="padding: 5px;">
        <div class=" col-12 search_div table_col tabIs_spinnerle-responsive">
            <h4>All Facility Details</h4>
            <div class="d-flex" style="display: flex; align-items: flex-end;">
                <div style="width: 70%;">
                    <label for="search">Search Facility:</label>
                    <input type="text" id="search" [(ngModel)]="searchText" placeholder="Search by Facility, or Any Relevant Information">
                </div>
                <div style="width: 30%" class="bttn_div">
                    <button class="start_btn" (click)="add_update('Add Facility', '')">Add Facility</button>
                </div>
            </div>
        </div>
        <div class="col-12">
            <table class="table table-bordered table-hover">
                <thead>
                    <tr>
                        <th>S.No</th>
                        <th>Facility</th>
                        <th>Discription</th>
                        <th>Management Users</th>
                        <th>Agreement Required</th>
                        <!-- <th>File Access To</th> -->
                        <th>Facility Policy Attachment</th>
                        <th>Calibration Settings</th>
                        <th>Action</th>
                    </tr>
                </thead>

                <tbody>
                    <tr
                        *ngFor="let request of filteredItems| paginate: { itemsPerPage, currentPage: page } ; let i = index">
                        <th>{{i +1}}</th>
                        <td>{{ request?.facility }}</td>
                        <td>{{ request?.longDescription }}</td>
                        <td align="center"><a (click)="view_allManagementUser(request?.managementUserIDList)">View
                                Users</a></td>
                        <td align="center">{{ request?.agreementRequired === true ? 'Yes' : 'No' }}</td>
                        <!-- <td>{{ request?.fileAccess }}</td> -->
                        <td align="center">
                            <a [href]="request?.facilityPolicyLink.startsWith('http') ? request?.facilityPolicyLink : 'https://' + request?.facilityPolicyLink"
                                target="_blank">
                                Visit Attachment
                            </a>
                        </td>
                        <td align="center"><a (click)="viewCalibrationsettings(request?.facilityID)">View Settings</a></td>
                        <td align="center">
                            <a (click)="add_update('Update Facility', request?.facilityID)"> <i
                                    class="bi bi-pencil-square"></i> Udpate</a> |
                            <a (click)="delete_facility(request?.facility, request?.facilityID)"><i
                                    class="bi bi-trash3-fill"></i></a>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- Show 'No data yet' if no data matches the filter -->
            <div *ngIf="filteredItems.length === 0" class="no-data-message">
                There are currently no facility available.
            </div>
            <div
                style="display: flex;justify-content: center; margin-top: 20px; font-size: 0.87em !important; font-weight: 600 !important;">
                <pagination-controls (pageChange)="page = $event"></pagination-controls>
            </div>
        </div>
    </div>
</div>

 
<div class="loader" *ngIf="isLoading">
    <div class="spinner"></div>
</div>